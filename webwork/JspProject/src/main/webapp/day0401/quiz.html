<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Nanum+Brush+Script&family=Nanum+Pen+Script&display=swap"
      rel="stylesheet"
    />
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button type="button" class="btn btn-success" id="btn1">
      studentToJson.jsp 읽기
    </button>
    <button type="button" class="btn btn-danger" id="btn2">
      foodToXml.jsp 읽기
    </button>

    <hr />

    <div id="result"></div>

    <script>
      $(function () {
        //json
        $("#btn1").click(function () {
          let html = "";

          $.getJSON("studentToJson.jsp", function (data) {
            $.each(data, function (i, student) {
              html +=
                `<div class='alert alert-info' style='width: 400px;'>` +
                `No: ${student.num}<br>` +
                `이름: ${student.name}<br>` +
                `<img src="${student.photo}" style="width:150px;"><br>` +
                `자바: ${student.java}<br>` +
                `스프링: ${student.spring}</div>`;
            });
            $("#result").html(html);
          });
        });

        $("#btn2").click(function () {
          let html = "";

          $.get("foodToXml.jsp", function (data) {
            $(data)
              .find("food")
              .each(function (i, ele) {
                const foodTag = $(ele);
                const num = foodTag.find("num").text();
                const foodName = foodTag.find("foodname").text();
                const foodPhoto = foodTag.find("foodphoto").text();
                const price = foodTag.find("price").text();
                const cnt = foodTag.find("cnt").text();
                html +=
                  `<div class='alert alert-info' style='width: 400px;'>` +
                  `No: ${num}<br>` +
                  `음식명: ${foodName}<br>` +
                  `<img src="${foodPhoto}" style="width:150px;"><br>` +
                  `가격: ${price}<br>` +
                  `갯수: ${cnt}</div>`;
              });

            $("#result").html(html);
          });
        });
      });
    </script>
  </body>
</html>
